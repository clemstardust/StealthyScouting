<!DOCTYPE html>
<html>

<head>
    <title>Stealthy Scouting Data</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        table {
            border-spacing: 0;
            width: 100%;
            border: 1px solid #ddd;
        }

        input[type=text] {
            width: 10%;
            padding: 5px 4px;
            margin: 8px 0;
            box-sizing: border-box;
        }

        textarea {
            width: 100%;
            height: 100px;
            padding: 12px 20px;
            box-sizing: border-box;
            border: 2px solid #ccc;
            border-radius: 4px;
            background-color: #f8f8f8;
            resize: none;
        }

        th {
            background-color: #000000;
            color: white;
        }

        th,
        td {
            text-align: left;
            padding: 16px;
        }

        img {
            width: 100%;
            height: auto;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2
        }

        .container {
            margin: auto;
            padding: 20px 32px;
        }
    </style>

    <script>
        function tickUp(id, iterateVal, min, max) {
            var value = parseInt(document.getElementById(id).value);
            value = isNaN(value) ? 0 : value;

            value = (value + iterateVal);
            if (value < min) {
                value = min
            } else if (value > max) {
                value = max;
            }
            document.getElementById(id).value = value;

            console.log(document.getElementById());
        }
    </script>

<script>
    window.addEventListener("load", function() {
    const form = document.getElementById('myForm');
    form.addEventListener("submit", function(e) {
        alert("Success!");
        e.preventDefault();
        const data = new FormData(form);
        const action = e.target.action;
        fetch(action, {
        method: 'POST',
        body: data,
        })
        .then(() => {
        clearForm();
        })
    });
    });
</script>

<script>
    //Clear form once submitted
    function clearForm(){
       document.getElementById("myForm").reset();
    }

    function AddData() {
        var formData = $("form").serializeArray();
        let csv = "";
        formData.forEach(function(item) {
            csv += item.value + ","; // concat form value on csv var and add ; to create columns (you can change to , if want)
        });
        csv += "\n";
        

        
        document.getElementById("csvshit").value += csv
        clearForm();
    }
  </script>
  <script>
    function DownloadData(textToWrite, fileNameToSaveAs) {
        var textFileAsBlob = new Blob([textToWrite], {type:'text/plain'}); 
        var downloadLink = document.createElement("a");
        downloadLink.download = fileNameToSaveAs;
        downloadLink.innerHTML = "Download File";
        if (window.webkitURL != null) {
        // Chrome allows the link to be clicked
        // without actually adding it to the DOM.
        downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
        }
        else {
        // Firefox requires the link to be added to the DOM
        // before it can be clicked.
        downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
        downloadLink.onclick = destroyClickedElement;
        downloadLink.style.display = "none";
        document.body.appendChild(downloadLink);
        }
        
        downloadLink.click();
    }
    
  </script>


</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <!--<a class="navbar-brand" href="#">Navbar</a>-->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="index.html">Field Scouting</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="pit-scouting.html">Pit Scouting <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="graphs.html">Data</a>
            </li>
            
        </form>
    </div>
    </nav>

    <div class="container">
        <form 
        id="myForm"
        method="POST" 
        action="https://script.google.com/macros/s/AKfycbzvvuUMzDtbJ31mn7XeyzXcdBgr8DvKdbVrnIQpfPjFMb_8Lymv5WpXMhMP46fDG4k/exec"
        autocomplete="off" >
            <div class="form-row">
                <div class="container">
                    <label for="teamnum">Team number:</label>
                    <input type="number" class="form-control" name="teamnum" id="teamnum">
                    <br>
                    <label>Drivetrain: </label>
                    <select class="form-select" id="drivetrain" name="drivetrain">
                        <option>Two Wheel Drive</option>
                        <option>Four Wheel Drive</option>
                        <option>Six Wheel Drive</option>
                        <option>Car Drive</option>
                        <option>Swerve Drive</option>
                        <option>Crab Drive</option>
                        <option>Holonomic Drive</option>
                        <option>Mecanum Drive</option>
                    </select>
                    <br>
                    <label>Can defend? </label>
                    <select class="form-select" id="candefend" name="candefend">
                        <option>Yes</option>
                        <option>No</option>
                    </select>
                    <br>
                    <label for="autos">Autos:</label>
                    <input class="form-control" name="autos" id="autos"></input>
                    <label for="feedback">Notes:</label>
                    <input class="form-control" name="feedback" id="feedback" name="feedback"></input>
                </div>
            </div>
            <div class="row">
                <div class="col text-center">
                    <button type="submit" class="btn-dark" >Submit Data</button>
                </div>
            </div>
        </form>
        </div>
</body>


</html>